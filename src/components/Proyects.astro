---
import { getCollection } from 'astro:content';
import type { CollectionEntry } from 'astro:content';

let projects: CollectionEntry<'projects'>[] = [];
try {
  const allProjects = await getCollection('projects');
  projects = allProjects.sort((a, b) => 
    new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
  );
} catch (error) {
  console.log('No projects found or error loading projects');
}
---
<div class="grid gap-12">
  {projects.length > 0 ? (
    projects.map((project) => (
      <a href={`/proyects/${project.slug}`} class="block group">
        <article class="transform transition-all duration-300 hover:-translate-y-1 hover:cursor-pointer">
          <h3 class="text-2xl font-bold mb-3 text-[rgb(var(--color-text-main))] group-hover:underline">
            {project.data.title}
          </h3>
          <p class="text-[rgb(var(--color-text-main))] text-lg">
            {project.data.description}
          </p>
        </article>
      </a>
    ))
  ) : (
    <p class="text-center text-lg font-serif text-[rgb(var(--color-text-main))]">No projects available yet.</p>
  )}
</div>
