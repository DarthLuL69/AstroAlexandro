---
import { getCollection } from 'astro:content';
import type { CollectionEntry } from 'astro:content';

let projects: CollectionEntry<'projects'>[] = [];
try {
  const allProjects = await getCollection('projects');
  projects = allProjects.sort((a, b) => 
    new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
  );
} catch (error) {
  console.log('No projects found or error loading projects');
}
---
<div class="space-y-12">
  {projects.length > 0 ? (
    projects.map((project) => (
      <a 
        href={`/proyects/${project.slug}`}
        class="block group"
      >
        <article class="space-y-2">
          <h2 class="text-2xl font-bold font-serif group-hover:underline">
            {project.data.title}
          </h2>
          <p class="text-[rgb(var(--color-text-main))/0.8] font-serif leading-relaxed">
            {project.data.description}
          </p>
        </article>
      </a>
    ))
  ) : (
    <p class="text-center text-lg font-serif">No projects available yet.</p>
  )}
</div>
